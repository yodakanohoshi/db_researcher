```bash
npx create-docusaurus@latest mysite classic
cd mysite
```

```bash
npm i js-yaml
```

```yaml
# data.yml（例）
- table_name: users
  table_description: ユーザーの基本情報
  keys:
    - name: id
      type: int
      pk: true
    - name: user_email
      type: text
      pk: false

- table_name: orders
  table_description: 購買情報
  keys:
    - name: product_name
      type: text
      pk: true
```

```js
// scripts/gen-docs.mjs
import fs from "fs";
import path from "path";
import yaml from "js-yaml";

const ROOT = process.cwd();
const DATA_PATH = path.join(ROOT, "data.yml");
const OUT_DIR = path.join(ROOT, "docs", "tables");

function ensureDir(p) {
  fs.mkdirSync(p, { recursive: true });
}

function esc(s) {
  // MDX / md の簡易エスケープ（必要最低限）
  return String(s ?? "").replace(/\|/g, "\\|");
}

function mdxForTable({ table_name, table_description, keys }) {
  const title = `${table_name} テーブル`;
  const slug = `/tables/${table_name}`;

  // mkdocs不要。Docusaurus用 front matter
  const frontMatter = [
    "---",
    `id: ${table_name}`,
    `title: ${title}`,
    `slug: ${slug}`,
    `description: ${esc(table_description || "")}`,
    "---",
    "",
  ].join("\n");

  const rows = (keys ?? []).map((k) => {
    const pk = k.pk ? "✅" : "—";
    return `| \`${esc(k.name)}\` | \`${esc(k.type)}\` | ${pk} |`;
  });

  const table = [
    "## カラム一覧",
    "",
    "| カラム名 | 型 | PK |",
    "|---|---|:--:|",
    ...rows,
    "",
  ].join("\n");

  const desc = table_description
    ? `> ${esc(table_description)}\n\n`
    : "";

  return frontMatter + `# ${title}\n\n` + desc + table;
}

function mdxIndex(tables) {
  const frontMatter = [
    "---",
    "id: _index",
    "title: テーブル一覧",
    "slug: /tables",
    "sidebar_position: 0",
    "description: すべてのテーブルドキュメントのインデックス",
    "---",
    "",
  ].join("\n");

  const list = tables
    .map(
      (t) =>
        `- [\`${t.table_name}\`](/docs/tables/${encodeURIComponent(
          t.table_name
        )}) — ${esc(t.table_description || "")}`
    )
    .join("\n");

  return frontMatter + "# テーブル一覧\n\n" + list + "\n";
}

function writeCategoryJson() {
  // サイドバーで綺麗に見せる（自動生成でも可）
  const category = {
    label: "Tables",
    position: 1,
    link: { type: "doc", id: "tables/_index" },
  };
  fs.writeFileSync(
    path.join(OUT_DIR, "_category_.json"),
    JSON.stringify(category, null, 2),
    "utf8"
  );
}

function main() {
  const raw = fs.readFileSync(DATA_PATH, "utf8");
  const data = yaml.load(raw);

  if (!Array.isArray(data)) {
    console.error("data.yml は配列のルートである必要があります。");
    process.exit(1);
  }

  ensureDir(OUT_DIR);

  // index
  fs.writeFileSync(path.join(OUT_DIR, "_index.mdx"), mdxIndex(data), "utf8");

  // tables
  for (const t of data) {
    if (!t.table_name) continue;
    const mdx = mdxForTable(t);
    fs.writeFileSync(path.join(OUT_DIR, `${t.table_name}.mdx`), mdx, "utf8");
  }

  writeCategoryJson();
  console.log("✅ docs/tables/ に MDX を生成しました。");
}

main();
```

```js
// sidebars.js
/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */
const sidebars = {
  tutorialSidebar: [{type: 'autogenerated', dirName: '.'}],
};

module.exports = sidebars;
```

```json
// package.json 追記
{
  "scripts": {
    "gen": "node scripts/gen-docs.mjs",
    "start": "docusaurus start",
    "build": "docusaurus build",
    "serve": "docusaurus serve"
  }
}
```

```bash
npm run gen      # data.yml から docs/tables/*.mdx を生成
npm run start    # http://localhost:3000
```